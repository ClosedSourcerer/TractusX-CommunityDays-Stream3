# *******************************************************************************
# Copyright (c) 2023 BMW AG
# Copyright (c) 2023 Contributors to the Eclipse Foundation
#
#   See the NOTICE file(s) distributed with this work for additional
#   information regarding copyright ownership.
#
#   This program and the accompanying materials are made available under the
#   terms of the Apache License, Version 2.0 which is available at
#   https://www.apache.org/licenses/LICENSE-2.0.
#
#   Unless required by applicable law or agreed to in writing, software
#   distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
#   WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
#   License for the specific language governing permissions and limitations
#   under the License.
#
#   SPDX-License-Identifier: Apache-2.0
#   ********************************************************************************


openapi: '3.0.2'
info:
  title: Spring Template API
  version: '1.0'
servers:
  - url: https://localhost:8080/

paths:

  /statuses:
    post:
      tags:
        - statuses
      summary: create a status
      operationId: postStatus
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StatusRequest'
      responses:
        200:
          description: General greeting
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StatusesResponse'

    get:
      tags:
        - statuses
      summary: get statuses object
      operationId: getStatuses
      responses:
        200:
          description: General greeting
          content:
            application/json:
              schema:
                #               type: object
                #               items:
                $ref: '#/components/schemas/StatusesResponse'

    put:
      tags:
        - statuses
      summary: update statuses by Id
      operationId: updateStatusesById
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StatusRequest'
      parameters:
        - in: 'path'
          name: 'status_id'
          schema:
            type: string
          required: true
      responses:
        200:
          description: Update of statuses
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StatusesResponse'


  /demand:
    post:
      tags:
        - Demand
      summary: create a demand
      operationId: postDemand
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MaterialDemandRequest'
      responses:
        200:
          description: General greeting
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MaterialDemandResponse'
    get:
      tags:
        - Demand
      summary: get list of MaterialsDemand
      operationId: getDemandsByProjectID
      responses:
        200:
          description: General greeting
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/MaterialDemandResponse'

  /demand/series:
    post:
      tags:
        - Demand
      summary: get the list of demand series by composite key
      operationId: getLinkedDemandSeriesByCompositeKeyID
      requestBody:
        description: Demand series composite request object
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DemandSeriesCompositeRequest'
      responses:
        200:
          description: General greeting
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DemandSeriesCompositeResponse'
  /demand/series/unlink:
    post:
      tags:
        - Demand
      summary: unlink material demands and demand series
      operationId: unlinkedDemandSeriesComposites
      requestBody:
        description: Demand series composite request object
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DemandSeriesUnlinkRequest'
      responses:
        204:
          description: no content

  /demand/{demand_id}:
    get:
      tags:
        - Demand
      summary: get demand by Id
      operationId: getDemandsById
      parameters:
        - in: 'path'
          name: 'demand_id'
          schema:
            type: string
          required: true
      responses:
        200:
          description: General greeting
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MaterialDemandResponse'

    put:
      tags:
        - Demand
      summary: update demand by Id
      operationId: updateDemandsById
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MaterialDemandRequest'
      parameters:
        - in: 'path'
          name: 'demand_id'
          schema:
            type: string
          required: true
      responses:
        200:
          description: Update of demands
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MaterialDemandResponse'
    delete:
      tags:
        - Demand
      summary: delete demand by Id
      operationId: deleteDemandsById
      parameters:
        - in: 'path'
          name: 'demand_id'
          schema:
            type: string
          required: true
      responses:
        200:
          description: Delete demand with id

  /capacityGroup/link:
    post:
      tags:
        - capacityGroup
      summary: create a link to capacityGroup and linkedDemand
      operationId: postLinkedCapacityGroupDemand
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LinkCGDSRequest'
      responses:
        204:
          description: no content
  /capacityGroup:
    get:
      tags:
        - capacityGroup
      summary: capacityGroup
      operationId: getCapacityGroups
      responses:
        200:
          description: CapacityGroupResponse
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/CapacityGroupDefaultViewResponse'
    post:
      tags:
        - capacityGroup
      summary: create capacityGroup
      operationId: postCapacityGroup
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CapacityGroupRequest'
      responses:
        200:
          description: General greeting
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CapacityGroupResponse'

  /capacityGroup/{capacityGroup_id}:
    get:
      tags:
        - capacityGroup
      summary: get capacityGroup by ID
      operationId: getCapacityGroupById
      parameters:
        - in: 'path'
          name: 'capacityGroup_id'
          schema:
            type: string
          required: true
      responses:
        200:
          description: Get capacity group representation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CapacityGroupResponse'


  /weekbasedcapacitygroup:
    get:
      tags:
        - weekBasedCapacityGroup
      summary: get weekBasedCapacityGroup
      operationId: getWeekBasedCapacityGroup
      responses:
        200:
          description: WeekBasedCapacityGroupResponse
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/WeekBasedCapacityGroupDtoResponse'


    post:
      tags:
        - weekBasedCapacityGroup
      summary: post weekBasedCapacityGroup
      operationId: postWeekBasedCapacityGroup
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: '#/components/schemas/WeekBasedCapacityGroupDtoRequest'
      responses:
        200:
          description: weekBasedCapacityGroup endpoint


  /weekbasedcapacitygroup/{weekBasedCapacity_id}:

    put:
      tags:
        - weekBasedCapacityGroup
      summary: update weekBasedCapacityGroup by id
      operationId: updateWeekBasedCapacityGroupById
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WeekBasedCapacityGroupDtoRequest'
      parameters:
        - in: 'path'
          name: 'weekBasedCapacity_id'
          schema:
            type: string
          required: true
      responses:
        200:
          description: Update of weekBasedCapacityGroup
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WeekBasedCapacityGroupDtoResponse'



  /weekbasedmaterialdemand/{weekBasedMaterialDemand_id}:

    put:
      tags:
        - weekBasedMaterialDemand
      summary: update weekBasedMaterialDemand
      operationId: updateWeekBasedMaterialDemandById
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WeekBasedMaterialDemandRequestDto'
      parameters:
        - in: 'path'
          name: 'weekBasedMaterialDemand_id'
          schema:
            type: string
          required: true
      responses:
        200:
          description: Update of weekBasedMaterialDemand
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WeekBasedMaterialDemandResponseDto'


  /weekbasedmaterialdemand:
    get:
      tags:
        - weekBasedMaterialDemand
      summary: get weekBasedMaterialDemand
      operationId: getWeekBasedMaterialDemand
      responses:
        200:
          description: WeekBasedMaterialDemandResponse
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/WeekBasedMaterialDemandResponseDto'


    post:
      tags:
        - weekBasedMaterialDemand
      summary: post weekBasedMaterialDemand
      operationId: postWeekBasedMaterialDemand
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: '#/components/schemas/WeekBasedMaterialDemandRequestDto'
      responses:
        200:
          description: weekBasedCapacityGroup endpoint

  /company:
    get:
      tags:
        - company
      summary: company
      operationId: getCompany
      responses:
        200:
          description: CompanyResponse
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/CompanyDto'

  /unitmeasure:
    get:
      tags:
        - unitMeasure
      summary: unitMeasure
      operationId: getUnitMeasure
      responses:
        200:
          description: UnitMeasureResponse
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/UnitMeasure'

  /demandcategory:
    get:
      tags:
        - demandCategory
      summary: demandCategory
      operationId: getDemandCategory
      responses:
        200:
          description: demandCategoryResponse
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DemandCategoryResponse'
  /favorite:
    get:
      tags:
        - favorite
      summary: get all favorites
      operationId: getFavorite
      responses:
        200:
          description: favorite response array
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/FavoriteResponse'
    post:
      tags:
        - favorite
      summary: Create a New Favorite
      operationId: createFavorite
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FavoriteRequest'
      responses:
        200:
          description: Favorite created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FavoriteResponse'
    put:
      tags:
        - favorite
      summary: Update a Favorite
      operationId: updateFavorite
      parameters:
        - name: id
          in: query
          required: true
          description: ID of the favorite to update
          schema:
            type: string
        - name: type
          in: query
          required: true
          description: type of the favorite to update
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FavoriteRequest'
      responses:
        200:
          description: Favorite updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FavoriteResponse'
    delete:
      tags:
        - favorite
      summary: Delete a Favorite by ID
      operationId: deleteFavoriteById
      parameters:
        - name: id
          in: query
          required: true
          description: ID of the favorite to delete
          schema:
            type: string
      responses:
        200:
          description: Favorite deleted successfully
        404:
          description: Favorite not found


  /favorite/{type}:
    get:
      tags:
        - favorite
      summary: Get a Favorite by type
      operationId: getFavoriteByType
      parameters:
        - name: type
          in: path
          required: true
          description: type of the favorite
          schema:
            type: string
      responses:
        200:
          description: Favorite found
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/FavoriteResponse'
        404:
          description: Favorite not found

components:
  schemas:

    StatusesResponse:
      type: object
      properties:
        general:
          type: integer
        todos:
          type: integer
        statusImprovement:
          type: integer
        statusDegredation:
          type: integer
        overall_general:
          type: integer
        overall_todos:
          type: integer
        overall_statusImprovement:
          type: integer
        overall_statusDegredation:
          type: integer


    StatusRequest:
      type: object
      properties:
        general:
          type: integer
        todos:
          type: integer
        statusImprovement:
          type: integer
        statusDegradation:
          type: integer
        overall_general:
          type: integer
        overall_todos:
          type: integer
        overall_statusImprovement:
          type: integer
        overall_statusDegradation:
          type: integer


    DemandRequestDto:
      type: object
      properties:
        startDate:
          type: string
        endDate:
          type: string
        requiredValue:
          type: number
        deliveredValue:
          type: number
        maximumValue:
          type: number
        productId:
          type: string
        projectId:
          type: string
        demandCategory:
          type: string
        companyId:
          type: string
        description:
          type: string

    CapacityGroupResponse:
      type: object
      properties:
        capacityGroupId:
          type: string
        capacitygroupname:
          type: string
        defaultActualCapacity:
          type: number
          format: float
        defaultMaximumCapacity:
          type: number
          format: float
        startDate:
          type: string
        endDate:
          type: string
        customer:
          $ref: '#/components/schemas/CompanyDto'
        supplier:
          $ref: '#/components/schemas/CompanyDto'
        linkMaterialDemandIds:
          type: array
          items:
            type: string
            format: uuid
          description: 'Array of UUIDs representing linked material demand IDs.'


    DemandResponseDto:
      type: object
      properties:
        id:
          type: string
        startDate:
          type: string
        endDate:
          type: string
        requiredValue:
          type: number
        deliveredValue:
          type: number
        maximumValue:
          type: number
        description:
          type: string
        demandCategory:
          type: string
        companyId:
          type: string
        product:
          $ref: '#/components/schemas/ProductDto'

    DemandRequestUpdateDto:
      type: object
      properties:
        actualDemand:
          type: number

    ProductDto:
      type: object
      properties:
        name:
          type: string
        un:
          type: string

    DemandCategoryDto:
      type: object
      properties:
        demandCategory:
          type: string

    LinkedDemandSeriesRequest:
      type: object
      properties:
        materialNumberCustomer:
          type: string
        materialNumberSupplier:
          type: string
        customerLocation:
          type: string
        demandCategory:
          $ref: '#/components/schemas/DemandCategoryDto'

    CapacitiesDto:
      type: object
      properties:
        calendarWeek:
          type: string
        actualCapacity:
          type: string
        maximumCapacity:
          type: string



    WeekBasedCapacityGroupDtoRequest:
      type: object
      properties:
        id:
          type: string
        viewed:
          type: boolean
        WeekBasedCapacityGroupRequest:
          $ref: '#/components/schemas/WeekBasedCapacityGroupRequest'


    WeekBasedMaterialDemandResponseDto:
      type: object
      properties:
        id:
          type: string
        viewed:
          type: boolean
        WeekBasedMaterialDemandRequest:
          $ref: '#/components/schemas/WeekBasedMaterialDemandRequest'


    WeekBasedCapacityGroupDtoResponse:
      type: object
      properties:
        id:
          type: string
        viewed:
          type: boolean
        WeekBasedCapacityGroupRequest:
          $ref: '#/components/schemas/WeekBasedCapacityGroupRequest'



    WeekBasedCapacityGroupRequest:
      type: object
      properties:
        unityOfMeasure:
          type: string
        linkedDemandSeries:
          type: array
          items:
            $ref: '#/components/schemas/LinkedDemandSeriesRequest'
        supplier:
          type: string
        name:
          type: string
        supplierLocations:
          type: array
          items:
            type: string
        capacities:
          type: array
          items:
            $ref: '#/components/schemas/CapacitiesDto'
        changedAt:
          type: string
        capacityGroupId:
          type: string
        customer:
          type: string

    WeekBasedMaterialDemandRequest:
      type: object
      properties:
        unityOfMeasure:
          type: string
        materialDescriptionCustomer:
          type: string
        materialDemandId:
          type: string
        materialNumberSupplier:
          type: string
        supplier:
          type: string
        changedAt:
          type: string
        demandSeries:
          type: array
          items:
            $ref: '#/components/schemas/DemandWeekSeriesDto'
        materialNumberCustomer:
          type: string
        customer:
          type: string

    WeekBasedMaterialDemandResponse:
      type: object
      properties:
        unityOfMeasure:
          type: string
        materialDescriptionCustomer:
          type: string
        materialDemandId:
          type: string
        materialNumberSupplier:
          type: string
        supplier:
          type: string
        changedAt:
          type: string
        demandSeries:
          type: array
          items:
            $ref: '#/components/schemas/DemandWeekSeriesDto'
        materialNumberCustomer:
          type: string
        customer:
          type: string

    DemandSeriesDto:
      type: object
      properties:
        demand:
          type: string
        calendarWeek:
          type: string

    DemandSeriesCategoryDto:
      type: object
      properties:
        id:
          type: string

    DemandWeekSeriesDto:
      type: object
      properties:
        expectedSupplierLocation:
          type: string
        demands:
          type: array
          items:
            $ref: '#/components/schemas/DemandSeriesDto'
        customerLocation:
          type: string
        demandCategory:
          $ref: '#/components/schemas/DemandSeriesCategoryDto'

    WeekBasedMaterialDemandRequestDto:
      type: object
      properties:
        id:
          type: string
        viewed:
          type: boolean
        WeekBasedMaterialDemandRequest:
          $ref: '#/components/schemas/WeekBasedMaterialDemandRequest'


    MaterialDemandRequest:
      type: object
      properties:
        materialDescriptionCustomer:
          type: string
        materialNumberCustomer:
          type: string
        materialNumberSupplier:
          type: string
        customerId:
          type: string
        supplierId:
          type: string
        unitMeasureId:
          type: string
        materialDemandSeries:
          type: array
          items:
            $ref: '#/components/schemas/MaterialDemandSeries'

    MaterialDemandSeries:
      type: object
      properties:
        customerLocationId:
          type: string
        expectedSupplierLocationId:
          type: array
          items:
            type: string
        demandCategoryId:
          type: string
        demandSeriesValues:
          type: array
          items:
            $ref: '#/components/schemas/MaterialDemandSeriesValue'

    MaterialDemandSeriesValue:
      type: object
      properties:
        calendarWeek:
          type: string
        demand:
          type: number

    MaterialDemandResponse:
      type: object
      properties:
        id:
          type: string
        materialDescriptionCustomer:
          type: string
        materialNumberCustomer:
          type: string
        materialNumberSupplier:
          type: string
        customer:
          $ref: '#/components/schemas/CompanyDto'
        supplier:
          $ref: '#/components/schemas/CompanyDto'
        unitMeasureId:
          $ref: '#/components/schemas/UnitMeasure'
        changedAt:
          type: string
        demandSeries:
          type: array
          items:
            $ref: '#/components/schemas/MaterialDemandSeriesResponse'

    CompanyDto:
      type: object
      properties:
        id:
          type: string
        bpn:
          type: string
        companyName:
          type: string
        street:
          type: string
        number:
          type: string
        zipCode:
          type: string
        country:
          type: string
        myCompany:
          type: string

    UnitMeasure:
      type: object
      properties:
        id:
          type: string
        dimension:
          type: string
        unCode:
          type: string
        description:
          type: string
        descriptionGerman:
          type: string
        unSymbol:
          type: string
        cxSymbol:
          type: string

    MaterialDemandSeriesResponse:
      type: object
      properties:
        customerLocation:
          $ref: '#/components/schemas/CompanyDto'
        expectedSupplierLocation:
          type: array
          items:
            $ref: '#/components/schemas/CompanyDto'
        demandCategory:
          $ref: '#/components/schemas/DemandCategoryResponse'
        demandSeriesValues:
          type: array
          items:
            $ref: '#/components/schemas/MaterialDemandSeriesValue'

    DemandSeriesCompositeResponse:
      type: object
      properties:
        demandSeries:
          type: array
          items:
            $ref: '#/components/schemas/LinkedDemandMaterialCompositeResponse'

    LinkedDemandMaterialCompositeResponse:
      type: object
      properties:
        demandSeriesID:
          type: string
        materialDemandID:
          type: string
        customerLocation:
          $ref: '#/components/schemas/CompanyDto'
        expectedSupplierLocation:
          type: array
          items:
            $ref: '#/components/schemas/CompanyDto'
        demandCategory:
          $ref: '#/components/schemas/DemandCategoryResponse'
        demandSeriesValues:
          type: array
          items:
            $ref: '#/components/schemas/MaterialDemandSeriesValue'

    DemandSeriesCompositeRequest:
      type: object
      properties:
        demandCategoryCodeID:
          type: string
        customerID:
          type: string
        materialNumberCustomer:
          type: string
    DemandSeriesUnlinkRequest:
      type: object
      properties:
        materialDemandID:
          type: string
        capacityGroupID:
          type: string


    DemandCategoryResponse:
      type: object
      properties:
        id:
          type: string
        demandCategoryCode:
          type: string
        demandCategoryName:
          type: string

    CapacityRequest:
      type: object
      properties:
        actualCapacity:
          type: number
        maximumCapacity:
          type: number
        calendarWeek:
          type: string

    CapacityLink:
      type: object
      properties:
        LinkedMaterial:
          type: string
        Capacities:
          type: array
          items:
            $ref: '#/components/schemas/CapacityRequest'

    LinkedDemandSeriesResponse:
      type: object
      properties:
        demandCategory:
          $ref: '#/components/schemas/DemandCategoryResponse'
        customerLocation:
          $ref: '#/components/schemas/CompanyDto'
        materialNumberSupplier:
          type: string
        materialNumberCustomer:
          type: string

    DeprecatedCapacityGroupResponse:
      type: object
      properties:
        capacityGroupId:
          type: string
        capacities:
          type: array
          items:
            $ref: '#/components/schemas/CapacityRequest'
        supplierLocations:
          type: array
          items:
            $ref: '#/components/schemas/CompanyDto'
        customer:
          $ref: '#/components/schemas/CompanyDto'
        supplier:
          $ref: '#/components/schemas/CompanyDto'
        weekBasedCapacityGroupId:
          type: string
        linkedDemandSeries:
          type: array
          items:
            $ref: '#/components/schemas/LinkedDemandSeriesResponse'
        unitOfMeasure:
          $ref: '#/components/schemas/UnitMeasure'
        changeAt:
          type: string
        name:
          type: string

    CapacityGroupDefaultViewResponse:
      type: object
      properties:
        internalId:
          type: string
        catXUuid:
          type: string
        name:
          type: string
        customerBPNL:
          type: string
        customerName:
          type: string
        supplierBNPL:
          type: string
        numberOfMaterials:
          type: number
        favoritedBy:
          type: string
        status:
          type: string

    LinkCGDSRequest:
      type: object
      properties:
        capacityGroupID:
          type: string
        linkedMaterialDemandID:
          type: array
          items:
            type: string
            format: uuid

    CapacityGroupRequest:
      type: object
      properties:
        capacitygroupname:
          type: string
        defaultActualCapacity:
          type: number
          format: float
        defaultMaximumCapacity:
          type: number
          format: float
        startDate:
          type: string
        endDate:
          type: string
        customer:
          type: string
        supplier:
          type: string
        linkDemandSeriesID:
          type: array
          items:
            type: string
            format: uuid

    FavoriteRequest:
      type: object
      properties:
        favoriteId:
          type: string
        fType:
          type: string

    FavoriteResponse:
      type: object
      properties:
        favoriteId:
          type: string
        fType:
          type: string